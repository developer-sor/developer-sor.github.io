<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>KDS</title>

    <meta name="author" content="narve">

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="../shared/knowit.css">
    <link rel="stylesheet" href="http://cdn.jsdelivr.net/reveal.js/2.6.2/css/reveal.css">
    <!--<link rel="stylesheet" href="http://cdn.jsdelivr.net/reveal.js/2.6.2/css/theme/sky.css" id="theme">-->
    <link rel="stylesheet" href="../shared/knowit-sky.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="http://cdn.jsdelivr.net/reveal.js/2.6.2/lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
        if (window.location.search.match(/print-pdf/gi)) {
            var link = document.createElement('link');
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = 'css/print/pdf.css';
            document.getElementsByTagName('head')[0].appendChild(link);
        }
    </script>

    <!--[if lt IE 9]>
    <script src="http://cdn.jsdelivr.net/reveal.js/2.6.2/lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

<div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides" id="slides">


        <div class="header">Knowit - KDS - 2014</div>
        <div class="footer">
            <img src="../shared/knowit_TM_logo_green_rgb.svg" alt="logo"/>
        </div>


        <section>
            <h1>Node and NOSQL - experience report</h1>

            <p>
                In 2014 Knowit SÃ¸r started a small in-house software development department.
                The technology chosen for the first few projects were HTML5, Angular, REST, Node.js,
                MongoDB, Heroku. In this talk we present our reasons for choosing this technology stack,
                important implications, and experiences - both positive and negative.

                The talk will touch on various related issues, including staffing, hosting and project management.
                The main focus will be on technical differences between our chosen stack and more "standard" development
                frameworks (Java/JavaEE, .Net): Dynamic typing vs static typing, synchronous
                vs asynchronous, RDBMS vs NoSQL, build systems and deployment, and more.
            </p>

            <p>
                Prerequisites: Some coding experience and knowledge of server side web programming (e.g. JavaEE,
                ASP.Net)
                is expected.
            </p>
        </section>

        <section data-markdown>
            <h1>TOC</h1>

            - Background
            - Experiences
            - Why did we do it?
            - Where we right to do it??
        </section>

        <section data-markdown>
            <h1>Background</h1>

            - New software department, starting with
            a promising portfolio of exactly 0 existing customers/projects
            - Initially a large and well-organized staff with exactly 1 developer
            - Limited-to-none experience with all of the following technologies
        </section>

        <section>
            <h1>First project</h1>

            <div data-markdown>

                - Now two developers :)
                - Small, simple data-entry system
                - Layout was mostly done
                - No yo, no grunt, no gulp, no mongoose
                - Heroku, Mongodb, Express, Angular
            </div>
        </section>

        </section>

        <section>
        Dynamicity...
        </section>

        <section>
        NPM vs maven/ivy
        </section>


        <section>
            <h1>Asynchronicity...</h1>
            <pre class="fragment"><code data-trim>
void processRequest( ServletRequest req, ServletResponse resp ) {
    Connection conn = null; PreparedStatement ps = null; ResultSet rs = null;
    try {
        conn = getConn();
        ps = conn.prepareStatement( "SELECT pw_hash FROM User WHERE ..." );
        ps.setString( 1, req.param( "userName" ) );
        rs = ps.executeQuery();
        if( rs.next() ) {
            if( rs.getString(1).equals( computeHash( req.getParam( "password" ) )
                resp.write( "OK" );
            else
                resp.write( "Wrong password" ); 
        } else {
        }
    } finally {
        DBHelper.close( conn, ps, rs );
    }
    ResultSet rs = conn().prepareStatement( "SELECT pw_hash FROM User WHERE ...." ).execute();
    return rs.next() && rs.getString(1).equals( computeHash(pw) );
}
            </code></pre>

            <pre class="fragment"><code data-trim>
@REST Annotations etc...
boolean login( String handle, String pw ) {
    ResultSet rs = conn.prepareStatement( "SELECT pw_hash FROM User WHERE ...." ).execute();
    return rs.next() && rs.getString(1).equals( computeHash(pw) );
}
            </code></pre>

            <pre class="fragment"><code data-trim>
function verifyPW( request, response ) {
    db.fetchUser( { username: request.param.username, function( rows ) },
        function( err, response ) {
            if( computeHash( request.param.password ) === response.pw_hash ) {
                res.json( 200 );
            } else {
                res.json( 403 ); // or 400 or 422, nitpickers:)
            }
        }
}
            </code></pre>

        </section>

        <section data-markdown>
            <h1>Second project</h1>

            - Slightly more complex functionality
            - Custom, responsive layout
            - Yo, grunt
            - Deployment more complex

            - DB: No schema...
            - Mongoose - wrong promises API

            - Callback pyramid of doom
            - Error handling


        </section>

    </div>

</div>



<script src="http://cdn.jsdelivr.net/reveal.js/2.6.2/lib/js/head.min.js"></script>
<script src="http://cdn.jsdelivr.net/reveal.js/2.6.2/js/reveal.min.js"></script>

<script>

    // Full list of configuration options available here:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({

        width: 1280,
        height: 1024,
//        margin: "10px",

        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

        // Parallax scrolling
        // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
        // parallaxBackgroundSize: '2100px 900px',

        // Optional libraries used to extend on reveal.js
        dependencies: [
            { src: 'http://cdn.jsdelivr.net/reveal.js/2.6.2/lib/js/classList.js', condition: function () {
                return !document.body.classList;
            } },
            { src: 'http://cdn.jsdelivr.net/reveal.js/2.6.2/plugin/markdown/marked.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            } },
            { src: 'http://cdn.jsdelivr.net/reveal.js/2.6.2/plugin/markdown/markdown.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            } },
            { src: 'http://cdn.jsdelivr.net/reveal.js/2.6.2/plugin/highlight/highlight.js', async: true, callback: function () {
                hljs.initHighlightingOnLoad();
            } },
            { src: 'http://cdn.jsdelivr.net/reveal.js/2.6.2/plugin/zoom-js/zoom.js', async: true, condition: function () {
                return !!document.body.classList;
            } },
            { src: 'http://cdn.jsdelivr.net/reveal.js/2.6.2/plugin/notes/notes.js', async: true, condition: function () {
                return !!document.body.classList;
            } }
        ]
    });

    //    var n = "full-screen";
    //    Reveal.addEventListener('full-screen', function () {
    //        console.log(n + ' has fired');
    //        alert(n + ' has begun');
    //
    //        document.getElementById("slides").removeAttribute("style");
    //
    //        alert(n + ' has finished');
    //
    //    });

</script>

</body>
</html>
